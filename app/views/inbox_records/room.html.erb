<%# 
　　受信した手紙を時系列ごとに並べた画面 
%>

<%# 変数定義　%>


<%# jsの自動スクロール用タグ %>
<div id="scroll-inner">

<%# 
    ///////////////////////////////
    //      手紙(時系列順)        // 
    /////////////////////////////// 
%>

  <% @letters.each do |letter| %>
  <div class="room-letter">
    <%= render letter %>
  </div>
  <% end %>

  <%# letter追加用タグ %>
  <div id="add-modal" >
    <%# (※Ajax) render 'letters/letter', letter: @letter %>
  </div>

<%#
    ///////////////////////////////
    //       ボタン              // 
    ///////////////////////////////
%>

  <div class="room-button center">
    
    <button id="reply-button" type="button" class="btn custom btn-primary mb-3" data-bs-toggle="modal" data-bs-target="#new-letter-modal">
      返信
    </button><br> 
    
  <%# 初めての返信の場合  %>
  <% if @letters.count == 1 %>
    <button type="button" class="btn custom btn-primary mb-3" data-bs-toggle="modal" data-bs-target="#new-letter-modal">
     海に流す
    </button><br>
    <button type="button" class="btn custom btn-danger mb-3" data-bs-toggle="modal" data-bs-target="#new-letter-modal">
     破棄する
    </button>

  <%# 初めての返信でない場合 %>
  <% else %>
    <button type="button" class="btn custom btn-danger" data-bs-toggle="modal" data-bs-target="#new-letter-modal">
    非表示
    </button>
  </div>
  <% end %>
</div>

<%# 返信用modal %>
<%= render "modal/send_letter_modal", {type:"reply"}%>